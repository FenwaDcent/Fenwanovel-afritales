<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Testimony ‚Äî Reader</title>
<link rel="stylesheet" href="../../assets/css/styles.css">
<style>
  .reader-header{display:flex;align-items:center;gap:12px;padding:12px;border-bottom:1px solid rgba(255,255,255,0.03);background:transparent}
  .chapters{padding:18px;max-width:900px;margin:0 auto}
  .chapter{background:linear-gradient(180deg,var(--card),#111);padding:16px;border-radius:12px;margin:14px 0}
  .cover{width:100%;max-width:420px;display:block;margin:8px 0;border-radius:12px}
  .watermark{position:fixed;bottom:8px;right:10px;opacity:0.12;pointer-events:none;font-weight:700}
</style>
</head>
  <!-- optional: Paystack inline script if you plan to use live payments -->
  <!-- <script src="https://js.paystack.co/v1/inline.js"></script> -->

  <!-- Global application script (required) -->
  <script src="assets/js/global.js"></script>

  <!-- small helper to show initial debug state (remove later) -->
  <script>
    // quick sanity checks ‚Äî open Console (F12) and paste these if you need debug info
    // (they will run automatically on page load)
    console.info('fenwa: dom ready ‚Äî checking app functions');
    console.info('setCoins function exists? ', typeof setCoins === 'function');
    console.info('getCoins():', typeof getCoins === 'function' ? getCoins() : 'no getCoins');
    console.info('buyModal element:', !!document.getElementById('buyModal'));
  </script>
</body>
</html>
<body>
  <header class="reader-header">
    <a href="../../">‚Üê Back</a>
    <h1 id="bookTitle">Loading‚Ä¶</h1>
    <div style="margin-left:auto" class="header-right">
      <div class="coin">üí∞ <span id="coinBadge2">0</span></div>
      <button id="buyBtn2" class="btn">Buy</button>
      <button class="btn ghost" onclick="toggleTheme()">Toggle theme</button>
    </div>
  </header>

  <main class="chapters" id="chapters"></main>

  <div id="buyModal" class="modal" hidden>
    <div class="modal-card">
      <div class="modal-head"><h3>Buy Coins</h3><button class="icon-btn" onclick="closeBuyModal()">‚úï</button></div>
      <div class="packs">
        <button class="pack" onclick="buyCoins(50,'50 coins',50000)">+50 (‚Ç¶500)</button>
        <button class="pack" onclick="buyCoins(150,'150 coins',120000)">+150 (‚Ç¶1,200)</button>
      </div>
      <div class="row"><input id="voucherInput" placeholder="Voucher code"><button class="btn" onclick="redeemVoucher()">Redeem</button></div>
    </div>
  </div>

  <div id="tati-watermark" class="watermark"></div>

<!-- BUY COINS MODAL -->
<div id="buyModal" class="modal" hidden>
  <div class="modal-card" role="dialog" aria-modal="true" aria-label="Buy Coins">
    <button class="modal-close" id="closeBuyModalBtn" aria-label="Close modal">‚úï</button>
    <h3>Buy Coins</h3>
    <p>Choose a coin pack or redeem a voucher.</p>

    <div class="coins-grid">
      <button class="pack btn" data-coins="50"  data-kobo="50000">+50 Coins (‚Ç¶500)</button>
      <button class="pack btn" data-coins="150" data-kobo="120000">+150 Coins (‚Ç¶1,200)</button>
      <button class="pack btn" data-coins="300" data-kobo="200000">+300 Coins (‚Ç¶2,000)</button>
    </div>

    <div style="text-align:center;margin:8px 0">or</div>

    <label style="display:flex;gap:8px;align-items:center;margin-top:8px">
      <input id="voucherInput" placeholder="Enter code e.g. FENWA100" style="flex:1;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);" />
      <button id="redeemBtn" class="btn">Redeem</button>
    </label>

    <p class="small muted" style="margin-top:12px">
      Demo mode: packs add coins locally unless you paste your Paystack public key in <code>assets/js/global.js</code>.
    </p>
  </div>
</div>
